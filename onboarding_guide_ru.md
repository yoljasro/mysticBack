# –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ Onboarding API

–í –¥–∞–Ω–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ –æ–ø–∏—Å–∞–Ω—ã –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤.

## üîë –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (JWT)
–î–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization`.

**–ó–∞–≥–æ–ª–æ–≤–æ–∫:**
`Authorization: Bearer <JWT_TOKEN>`

---

## üöÄ –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (Patch Update)
–≠—Ç–æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —à–∞–≥–æ–≤ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ (–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –≤—ã–±–æ—Ä –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤, –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏ —Ç.–¥.).

- **URL:** `/api/onboarding/update`
- **–ú–µ—Ç–æ–¥:** `PATCH`
- **–ó–∞–ø—Ä–æ—Å (Body - JSON):**
```json
{
    "nickname": "StarGazer",
    "gender": "male",
    "location": {
        "latitude": 41.3111,
        "longitude": 69.2406,
        "address": "–¢–∞—à–∫–µ–Ω—Ç, –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω"
    },
    "searchRadius": 30,
    "placeOfBirth": "–°–∞–º–∞—Ä–∫–∞–Ω–¥",
    "timeOfBirth": "20:15",
    "lookingFor": ["friendship", "serious_relationship"],
    "interests": ["Astrology", "Technology", "Art"],
    "bio": "–õ—é–±–ª—é –∏–∑—É—á–∞—Ç—å –∑–≤–µ–∑–¥—ã –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞—Ç—å.",
    "onboardingStep": 5,
    "notificationsEnabled": true
}
```

- **–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK):**
```json
{
    "message": "Profile updated successfully",
    "user": {
        "_id": "60d...",
        "name": "Ivan",
        "nickname": "StarGazer",
        "gender": "male",
        "onboardingStep": 5,
        "onboardingCompleted": false
    }
}
```

---

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π (Upload Photos)
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≥–∞–ª–µ—Ä–µ–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

- **URL:** `/api/onboarding/photos`
- **–ú–µ—Ç–æ–¥:** `POST`
- **Content-Type:** `multipart/form-data`
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (Form Data):**
    - `photos`: (–§–∞–π–ª—ã) –º–∞—Å—Å–∏–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–¥–æ 10 —à—Ç—É–∫).
    - `replace`: (–°—Ç—Ä–æ–∫–∞) `"true"` –∏–ª–∏ `"false"`. –ï—Å–ª–∏ true, —Ç–µ–∫—É—â–∞—è –≥–∞–ª–µ—Ä–µ—è –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–æ–≤—ã–º–∏ —Ñ–æ—Ç–æ.

- **–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK):**
```json
{
    "message": "Photos uploaded successfully",
    "photos": [
        "https://domain.com/uploads/photos-1625...jpg",
        "https://domain.com/uploads/photos-1625...png"
    ]
}
```

---

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ (Get Status)
–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —É–∑–Ω–∞—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

- **URL:** `/api/onboarding/status`
- **–ú–µ—Ç–æ–¥:** `GET`

- **–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK):**
```json
{
    "onboardingStep": 5,
    "onboardingCompleted": false
}
```

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π –º–æ–¥–µ–ª–∏ User (Onboarding)

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| `nickname` | String | –ü—É–±–ª–∏—á–Ω–æ–µ –∏–º—è (–Ω–∏–∫–Ω–µ–π–º). |
| `gender` | String | –ü–æ–ª (`male`, `female`, `other`). |
| `location` | Object | –û–±—ä–µ–∫—Ç —Å `latitude`, `longitude` –∏ `address`. |
| `searchRadius` | Number | –†–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞ –ª—é–¥–µ–π –≤ –∫–º. |
| `placeOfBirth` | String | –ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è. |
| `timeOfBirth` | String | –í—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ "HH:mm". |
| `lookingFor` | Array | –ú–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫ (—Ü–µ–ª–∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞). |
| `interests` | Array | –ú–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫ (—Å–ø–∏—Å–æ–∫ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤). |
| `photos` | Array | –°–ø–∏—Å–æ–∫ URL –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π. |
| `bio` | String | –ë–∏–æ–≥—Ä–∞—Ñ–∏—è / –û —Å–µ–±–µ (–º–∞–∫—Å. 500 —Å–∏–º–≤.). |
| `personalityType`| String| –¢–∏–ø –ª–∏—á–Ω–æ—Å—Ç–∏ (–∏–Ω—Ñ–æ –ø–æ –º–∞—Å–∫–∞–º –≤ Figma). |
| `onboardingStep` | Number | –ù–æ–º–µ—Ä —Ç–µ–∫—É—â–µ–≥–æ —à–∞–≥–∞. |
| `onboardingCompleted`| Boolean| –§–ª–∞–≥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞. |
| `notificationsEnabled`| Boolean| –í–∫–ª—é—á–µ–Ω—ã –ª–∏ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è. |
